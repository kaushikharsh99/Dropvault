<!DOCTYPE html>
<html>
<head>
  <title>DropVault Side Panel</title>
  <link rel="stylesheet" href="popup.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Side Panel Specific Overrides */
    body {
      width: 100%;
      height: 100vh;
      margin: 0;
      overflow-y: auto;
    }
    .container {
      width: 100%;
      height: 100%;
      min-width: unset;
      display: flex;
      flex-direction: column;
    }
    
    /* Drop Zone Styles adapted from Drawer */
    .dv-drop-area {
      flex: 1;
      margin: 20px;
      border: 2px dashed #e5e7eb;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #9ca3af;
      transition: all 0.2s;
      text-align: center;
      padding: 20px;
      min-height: 200px;
    }
    .dv-drop-area.drag-active {
      border-color: hsl(234, 89%, 72%);
      background: hsla(234, 89%, 72%, 0.05);
      color: hsl(234, 89%, 72%);
    }
    .dv-drop-icon {
      width: 48px;
      height: 48px;
      margin-bottom: 12px;
      stroke-width: 1.5;
    }
    .dv-drop-text {
      font-size: 14px;
      font-weight: 500;
    }
    .dv-drop-subtext {
      font-size: 12px;
      margin-top: 4px;
      opacity: 0.7;
    }

    .dv-status-list {
      padding: 0 20px 20px;
      overflow-y: auto;
      max-height: 200px;
    }
    .dv-status-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: #f9fafb;
      border-radius: 8px;
      margin-bottom: 8px;
      font-size: 13px;
      color: #374151;
    }
    .dv-status-icon {
      width: 16px;
      height: 16px;
      flex-shrink: 0;
    }
    .dv-status-text {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      flex: 1;
    }
    
    #drop-zone-view {
        height: 100%;
        display: flex;
        flex-direction: column;
    }
  </style>
</head>
<body>
  <div class="container" id="app-container">
    
    <!-- Auth View (Reused) -->
    <div id="auth-view" class="hidden">
        <div class="auth-header">
            <div class="logo-placeholder">DV</div>
            <h2>DropVault</h2>
        </div>
        
        <div class="auth-tabs">
            <button id="tab-signin" class="tab-btn active">Sign In</button>
            <button id="tab-signup" class="tab-btn">Sign Up</button>
        </div>

        <div id="signin-form" class="auth-form">
            <div class="input-group">
                <input type="email" id="signin-email" placeholder="Email">
            </div>
            <div class="input-group">
                <input type="password" id="signin-password" placeholder="Password">
            </div>
            <button id="signin-btn" class="btn-primary">Sign In</button>
        </div>

        <div id="signup-form" class="auth-form hidden">
            <div class="input-group">
                <input type="text" id="signup-name" placeholder="Full Name">
            </div>
            <div class="input-group">
                <input type="email" id="signup-email" placeholder="Email">
            </div>
            <div class="input-group">
                <input type="password" id="signup-password" placeholder="Password">
            </div>
            <button id="signup-btn" class="btn-primary">Create Account</button>
        </div>

        <div class="divider">
            <span>Or continue with</span>
        </div>

        <button id="google-login-btn" class="btn-outline">
            Sign in with Google
        </button>
        
        <div id="auth-error" class="error-message"></div>
    </div>

    <!-- Drop Zone View -->
    <div id="drop-zone-view" class="hidden">
        <div class="auth-header" style="padding-bottom: 0;">
             <div class="d-flex justify-content-between align-items-center w-100" style="display: flex; justify-content: space-between; width: 100%;">
                <h2 style="margin:0;">Drop Zone</h2>
                <button id="signout-btn" style="background:none; border:none; color:#6b7280; cursor:pointer; font-size:12px;">Sign Out</button>
             </div>
        </div>

        <div class="dv-drop-area" id="dv-drop-target">
            <svg class="dv-drop-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
            <div class="dv-drop-text">Drag items here</div>
            <div class="dv-drop-subtext">Images, Links, or Text</div>
        </div>
        
        <div class="dv-status-list" id="dv-status-list">
            <!-- Status items -->
        </div>
        
        <div style="padding: 20px; border-top: 1px solid #e5e7eb;">
            <button id="capture-page-btn" class="btn-primary">Capture Current Page</button>
        </div>
    </div>

    <!-- Loading View -->
    <div id="loading-view" class="loading-state">
        <div class="spinner"></div>
        <p>Loading...</p>
    </div>
  </div>
  <script type="module" src="sidepanel.js"></script>
</body>
</html>